@using WebApplication16.ViewModels
@model PaginatedList<Post>

@{
    // توضیح منطق ویو:
    // این کد بررسی می‌کند که آیا یک عنوان سفارشی از طریق ViewData ارسال شده یا خیر.
    // اگر بله (یعنی در صفحه آرشیو هستیم)، از آن استفاده می‌کند. در غیر این صورت، از عنوان پیش‌فرض "وبلاگ" استفاده می‌کند.
    ViewData["Title"] = ViewData["ArchiveTitle"] ?? "وبلاگ";
}

<h1>@ViewData["Title"]</h1>

@if (!Model.Any())
{
    <p>مقاله‌ای برای نمایش وجود ندارد.</p>
}
else
{
    @foreach (var item in Model)
    {
        <article class="blog-post mb-4">
            <h2><a asp-action="Details" asp-route-slug="@item.Slug">@item.Title</a></h2>
            <p class="blog-post-meta">@item.CreatedAt.ToShortDateString() در دسته <a asp-action="Category" asp-route-slug="@item.Category.Slug">@item.Category.Name</a></p>

            @if (!string.IsNullOrEmpty(item.FeaturedImageUrl))
            {
                <img src="@item.FeaturedImageUrl" class="img-fluid rounded mb-3" alt="@item.Title" />
            }

            <div class="excerpt">
                @Html.Raw(item.Excerpt)
            </div>
            <a asp-action="Details" asp-route-slug="@item.Slug" class="btn btn-outline-primary mt-2">ادامه مطلب...</a>
        </article>
        <hr />
    }

    <!-- کنترل‌های صفحه‌بندی -->
    var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
    var nextDisabled = !Model.HasNextPage ? "disabled" : "";

    <nav aria-label="Page navigation">
        <ul class="pagination">
            <li class="page-item @prevDisabled">
                <a class="page-link" asp-action="Index" asp-route-pageNumber="@(Model.PageIndex - 1)">قبلی</a>
            </li>
            <li class="page-item @nextDisabled">
                <a class="page-link" asp-action="Index" asp-route-pageNumber="@(Model.PageIndex + 1)">بعدی</a>
            </li>
        </ul>
    </nav>
}